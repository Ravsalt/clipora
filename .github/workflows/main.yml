name: Scheduled Clipora Cronjob

on:
  schedule:
    - cron: "*/5 * * * *" # Every 5 minutes UTC

jobs:
  ping-clipora:
    runs-on: ubuntu-latest

    steps:
      - name: üõ∞Ô∏è Pinging Clipora
        run: |
          echo "Starting ping to Clipora..."
          
          RESPONSE=$(curl --write-out "%{http_code}" \
                          --silent \
                          --output /dev/null \
                          --user-agent "CliporaMonitor/1.0" \
                          --max-time 10 \
                          "https://clipora.onrender.com")

          echo "HTTP Response Code: $RESPONSE"

          if [[ "$RESPONSE" -ne 200 ]]; then
            echo "::error ::Clipora is DOWN or returned HTTP $RESPONSE"
            exit 1
          else
            echo "::notice ::Clipora is UP ‚úÖ"
          fi
